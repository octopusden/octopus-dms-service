<?xml version="1.0" encoding="UTF-8"?>
<meta-runner name="Publish in DMS">
    <description>
        Depends on following TeamCity parameters:
        * DMS_STANDARD_PARAMETERS
        * DMS_EXTRA_PARAMETERS
        * DMS_JVM_OPTS
        * DMS_JDK_VERSION
        * DMS_MAVEN_VERSION
        * env.BUILD_ENV
    </description>
    <settings>
        <parameters>
            <param name="COMPONENT_NAME" value="" spec="text description='Name of Component registered in Component Registry' validationMode='not_empty' display='normal'"/>
            <param name="BUILD_VERSION" value="" spec="text description='Component version registered in JIRA' validationMode='not_empty' display='normal'"/>
        </parameters>
        <build-runners>
            <runner name="PublishInDMS" type="Maven2">
                <parameters>
                    <param name="goals" value="org.octopusden.octopus.dms:maven-dms-plugin:$version:publish" />
                    <param name="jvmArgs" value="-Duser.home=%teamcity.agent.jvm.user.home% %DMS_JVM_OPTS%" />
                    <param name="maven.path" value="%env.BUILD_ENV%/MAVEN/%DMS_MAVEN_VERSION%" />
                    <param name="runnerArgs" value="%DMS_STANDARD_PARAMETERS% -Dcomponent=%COMPONENT_NAME% -Dversion=%BUILD_VERSION% %DMS_EXTRA_PARAMETERS%"/>
                    <param name="target.jdk.home" value="%env.BUILD_ENV%/JDK/%DMS_JDK_VERSION%" />
                    <param name="teamcity.step.mode" value="default" />
                    <param name="userSettingsSelection" value="userSettingsSelection:default" />
                </parameters>
            </runner>
        </build-runners>
        <requirements />
    </settings>
</meta-runner>
