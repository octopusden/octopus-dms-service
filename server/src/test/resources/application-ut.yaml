eureka:
  client:
    enabled: false

spring:
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: ${auth-server.url}/realms/${auth-server.realm}
  datasource:
    url: jdbc:postgresql://${test.postgres-host}/dms
    username: dms
    password: dms

auth-server:
  url: # set via env
  realm: # set via env

dms-service:
  webhook:
    enabled: false
  docker-registry: docker.io

storage:
  maven-group-prefix: corp.domain.dms
  artifactory:
    host: http://${test.artifactory-host}
    user: admin
    password: password
    upload-repositories:
      MAVEN: maven-upload-repo-local
    staging-repositories:
      MAVEN:
        - maven-dev-repo-local
      DEBIAN:
        - debian-dev-repo-local-1
        - debian-dev-repo-local-2
      RPM:
        - rpm-dev-repo-local
    release-repositories:
      DOCKER:
        - docker-repo-local
      MAVEN:
        - maven-release-repo-local
      DEBIAN:
        - debian-release-repo-local-1
        - debian-release-repo-local-2
      RPM:
        - rpm-release-repo-local

components-registry-service:
  url: http://${test.components-registry-host}

releng:
  host: http://${test.mock-server-host}

release-management-service:
  url: http://${test.release-management-host}

validation:
  file-validator:
    enabled: true
    rules:
      - id: license
        pattern: ((.*[/\\])|^)licenses[/\\]THIRD-PARTY.txt$
      - id: copyright
        pattern: ((.*[/\\])|^)COPYRIGHT$
  name-validator:
    enabled: true
    allowed-pattern: ^(?!.*([Uu][Nn][Aa][Ll][Ll][Oo][Ww][Ee][Dd])).*$
  content-validator:
    enabled: true
    parallelism: 20
    exclude:
      - '**/WEB-INF/licenses/**'
      - '**.bin'
      - '**.prm'
      - '**.exe'
      - '**.dll'
      - '**.so'
      - '**.gif'
      - '**.jpg'
      - '**.png'
      - '**.class'
      - '**.xsd'
      - '**.xsb'
      - '**.wsdl'
    forbidden-tokens:
      - unallowed
    forbidden-patterns:
      - .*unallowed.*

octopus-security:
  roles:
    ROLE_DMS_USER_DEV:
      - ACCESS_CONFIGURATION
      - ACCESS_META
      - ACCESS_NOTES
      - ACCESS_DOCUMENTATION
      - ACCESS_DISTRIBUTION
      - PUBLISH_ARTIFACT
      - DELETE_DATA

management:
  endpoints:
    web:
      exposure:
        include: health, env, metrics, threaddump, heapdump, info, configprops, prometheus, loggers
    loggers:
      enabled: true
  endpoint:
    health:
      show-details: always

logging.level:
  ROOT: INFO
  org.octopusden.cloud.commons.security: TRACE
  org.octopusden.octopus.dms.security: TRACE
  org.octopusden.octopus.dms: DEBUG